"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.modal=exports.default=exports.Modal=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_modal=_interopRequireWildcard(require("./src/modal")),_vXETable=_interopRequireDefault(require("../v-x-e-table"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(_getRequireWildcardCache=function(e){return e?o:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var o,l,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((l=a?Object.getOwnPropertyDescriptor(e,o):null)&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]);return r.default=e,t&&t.set(e,r),r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ModalClass=null;function openModal(e){var r=Object.assign({},e,{transfer:!0});return new Promise(function(t){var o,l;r&&r.id&&_modal.allActivedModals.some(function(e){return e.id===r.id})?t("exist"):(o=r.events||{},r.events=Object.assign({},o,{hide:function(e){o.hide&&o.hide.call(this,e),setTimeout(function(){return l.$destroy()},l.isMsg?500:100),t(e.type)}}),l=new ModalClass({el:document.createElement("div"),propsData:r}),setTimeout(function(){l.isDestroy?l.close():l.open()}))})}function closeModal(e){return(arguments.length?[getModal(e)]:_modal.allActivedModals).forEach(function(e){e&&(e.isDestroy=!0,e.close("close"))}),Promise.resolve()}function getModal(t){return _xeUtils.default.find(_modal.allActivedModals,function(e){return e.id===t})}var ModalController={get:getModal,close:closeModal,open:openModal},modal=ModalController;exports.modal=modal;var shortcutTypes=["alert","confirm","message"];shortcutTypes.forEach(function(r,a){var n=2===a?{mask:!1,lockView:!1,showHeader:!1}:{showFooter:!0};n.type=r,n.dblclickZoom=!1,1===a&&(n.status="question"),ModalController[r]=function(e,t,o){var l={};return _xeUtils.default.isObject(e)?l=e:(l=t?2===a?{status:t}:{title:t}:l).content=_xeUtils.default.toValueString(e),openModal(Object.assign({type:r},n,l,o))}});var Modal=Object.assign(_modal.default,{install:function(e){_vXETable.default._modal=1,e.component(_modal.default.name,_modal.default),ModalClass=e.extend(_modal.default),_vXETable.default.modal=ModalController,e.prototype.$vxe?e.prototype.$vxe.modal=ModalController:e.prototype.$vxe={modal:ModalController}}}),_default=exports.Modal=Modal;exports.default=_default;