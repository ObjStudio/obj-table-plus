"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_utils=require("../../tools/utils"),_util=require("./util"),_render=require("./render"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var props={title:String,field:String,size:String,span:[String,Number],align:String,titleAlign:String,titleWidth:[String,Number],titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},className:[String,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visible:{type:Boolean,default:null},visibleMethod:Function,folding:Boolean,collapseNode:Boolean,itemRender:Object},watch={};Object.keys(props).forEach(function(t){watch[t]=function(e){this.itemConfig.update(t,e)}});var renderItem=function(e,t,i,l){var n,r=t._e,o=t.rules,a=t.data,s=t.collapseAll,u=t.validOpts,d=t.titleOverflow,f=i.title,c=i.folding,m=i.visible,v=i.field,g=i.collapseNode,p=i.itemRender,_=i.showError,x=i.errRule,h=i.className,b=i.titleOverflow,N=(0,_utils.isEnableConf)(p)?_vXETable.default.renderer.get(p.name):null,S=N?N.itemClassName:"",q=i.span||t.span,O=i.align||t.align,y=i.titleAlign||t.titleAlign,I=i.titleWidth||t.titleWidth,w=_xeUtils.default.isUndefined(b)||_xeUtils.default.isNull(b)?d:b,d="title"===w,b=!0===w||"tooltip"===w,w=d||b||"ellipsis"===w,C={data:a,field:v,property:v,item:i,$form:t};if(!1===m)return r();!o||(F=o[v])&&(n=F.some(function(e){return e.required}));var F=[];l&&l.default?F=t.callSlot(l.default,C,e):N&&N.renderItemContent?F=(0,_vn.getSlotVNs)(N.renderItemContent.call(t,e,p,C)):N&&N.renderItem?F=(0,_vn.getSlotVNs)(N.renderItem.call(t,e,p,C)):v&&(F=["".concat(_xeUtils.default.get(a,v))]);b=b?{mouseenter:function(e){t.triggerTitleTipEvent(e,C)},mouseleave:t.handleTitleTipLeaveEvent}:{};return e("div",{class:["vxe-form--item",i.id,q?"vxe-col--".concat(q," is--span"):"",h?_xeUtils.default.isFunction(h)?h(C):h:"",S?_xeUtils.default.isFunction(S)?S(C):S:"",{"is--title":f,"is--required":n,"is--hidden":c&&s,"is--active":(0,_util.isActivetem)(t,i),"is--error":_}]},[e("div",{class:"vxe-form--item-inner"},[f||l&&l.title?e("div",{class:["vxe-form--item-title",y?"align--".concat(y):null,{"is--ellipsis":w}],style:I?{width:isNaN(I)?I:"".concat(I,"px")}:null,attrs:{title:d?(0,_utils.getFuncText)(f):null},on:b},(0,_render.renderTitle)(e,t,i)):null,e("div",{class:["vxe-form--item-content",O?"align--".concat(O):null]},F.concat([g?e("div",{class:"vxe-form--item-trigger-node",on:{click:t.toggleCollapseEvent}},[e("span",{class:"vxe-form--item-trigger-text"},s?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),e("i",{class:["vxe-form--item-trigger-icon",s?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})]):null,x&&u.showMessage?e("div",{class:"vxe-form--item-valid",style:x.maxWidth?{width:"".concat(x.maxWidth,"px")}:null},x.message):null]))])])},_default={name:"VxeFormItem",props:props,inject:{$xeform:{default:null},$xeformgather:{default:null}},provide:function(){return{$xeformitem:this,$xeformiteminfo:this}},data:function(){return{itemConfig:null}},watch:watch,mounted:function(){(0,_util.assemItem)(this)},created:function(){this.itemConfig=(0,_util.createItem)(this.$xeform,this)},destroyed:function(){(0,_util.destroyItem)(this)},render:function(e){var t=this.$xeform;return t&&t.customLayout?renderItem(e,t,this.itemConfig,this.$scopedSlots):e("div")}};exports.default=_default;